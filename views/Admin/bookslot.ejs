<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <title>Document</title>
</head>
<body>
    <style>
        .row {
            margin-bottom: 1%;
        }
        .footer {
  background-image: url("https://imgs.search.brave.com/OUna0VmxX8zvj0AOOMva0fNhECEvQyPUfvMv4JXv194/rs:fit:1200:1200:1/g:ce/aHR0cHM6Ly93YWxs/cGFwZXJjYXZlLmNv/bS93cC8xUEZIeVl5/LmpwZw");
  background-attachment: fixed;
  background-position: center;
  background-size: cover;
  background-repeat: no-repeat;
  padding: 20px 0px; 
    color: white;
    bottom: 0;
    width: 100%;}
    .row-content {
      margin: 0px auto;
      padding: 50px 0px; 
    display: block;}
    </style>
    <%- include("header", {active: "Appointments List", adminname: adminname}); %>
    <div style="margin-top: 12%; border: 1px solid gray; border-radius: 5px; margin-left: 25%; margin-right: 20%;">
        <h3 style="margin-bottom: 3%;"><center>Book Slot</center></h3>
            <div class="row">
                <div class="offset-md-3 col-md-3">
                    <h4>Patient Name: </h4>
                </div>
                <div class="col-md-3">
                    <h4><%= patientname %></h4>
                </div>
            </div>
            <div class="row">
                <div class="offset-md-3 col-md-3">
                    <h4>Doctor Name: </h4>
                </div>
                <div class="col-md-3">
                    <h4><%=docname %></h4>
                </div>
            </div>
            <div class="row">
                <div class="offset-md-3 col-md-3">
                    <h4>Date: </h4>
                </div>
                <div class="col-md-3">
                    <h4><%= date %></h4>
                </div>
            </div>
            <div class="row">
                <div class="offset-md-3 col-md-3">
                    <h4>Avaliable slots: </h4>
                </div>
                <div class="col-md-6">
                    <% const slot = ["10:00 - 10:30","10:30 - 11:00","11:00 - 11:30","1:00 - 1:30","1:30 - 2:00","2:00 - 2:30","2:30 - 3:00","3:00 - 3:30","3:30 - 4:00","4:00 - 4:30"]; %>
                    <% doc = docname %>
                    <% k=0 %>
                    <% for(var j = 0; j < doctors.length; j++) {%>
                        <% if(doctors[j].docname==doc) {%>
                            <% k= j; %>
                        <% } %>
                    <% } %>
                    <% slotdate = date - doctors[k].date %>
                    <% if(-1==slotdate) { %>
                        <% for(var j = 0; j < 10; j++) {%>
                            <% if(doctors[k].slot0[j] == true) { %>
                                <a href="#" class="btn btn-outline-success" style="margin-bottom: 3%;" onclick="fun('<%= j %>', '<%= slotdate%>', '<%= docname %>', '<%= patientname %>')"><%= slot[j] %></a>
                            <% } %>
                            <% if(doctors[k].slot0[j] == false) { %>
                                <a href="#" class="btn btn-danger disabled" style="margin-bottom: 3%;"><%= slot[j] %></a>
                            <% } %>  
                        <% } %>
                    <% } %>
                        <% if(0==slotdate) { %>
                            <% for(var j = 0; j < 10; j++) {%>
                                <% if(doctors[k].slot1[j] == true) { %>
                                    <a href="#" class="btn btn-outline-success" style="margin-bottom: 3%;" onclick="fun('<%= j %>', '<%= slotdate%>', '<%= docname %>', '<%= patientname %>')"><%= slot[j] %></a>
                                <% } %>
                                <% if(doctors[k].slot1[j] == false) { %>
                                    <a href="#" class="btn btn-danger disabled" style="margin-bottom: 3%;"><%= slot[j] %></a>
                                <% } %>  
                            <% } %>
                        <% } %>
                        <% if(1==slotdate) { %>
                            <% for(var j = 0; j < 10; j++) {%>
                                <% if(doctors[k].slot2[j] == true) { %>
                                    <a href="#" class="btn btn-outline-success" style="margin-bottom: 3%;" onclick="fun('<%= j %>', '<%= slotdate%>', '<%= docname %>', '<%= patientname %>')"><%= slot[j] %></a>
                                <% } %>
                                <% if(doctors[k].slot2[j] == false) { %>
                                    <a href="#" class="btn btn-danger disabled" style="margin-bottom: 3%;"><%= slot[j] %></a>
                                <% } %>  
                            <% } %>
                        <% } %>
                        <% if(2==slotdate) { %>
                            <% for(var j = 0; j < 10; j++) {%>
                                <% if(doctors[k].slot3[j] == true) { %>
                                    <a href="#" class="btn btn-outline-success" style="margin-bottom: 3%;" onclick="fun('<%= j %>', '<%= slotdate%>', '<%= docname %>', '<%= patientname %>')"><%= slot[j] %></a>
                                <% } %>
                                <% if(doctors[k].slot3[j] == false) { %>
                                    <a href="#" class="btn btn-danger disabled" style="margin-bottom: 3%;"><%= slot[j] %></a>
                                <% } %>  
                            <% } %>
                        <% } %>
                        <% if(3==slotdate) { %>
                            <% for(var j = 0; j < 10; j++) {%>
                                <% if(doctors[k].slot4[j] == true) { %>
                                    <a href="#" class="btn btn-outline-success" style="margin-bottom: 3%;" onclick="fun('<%= j %>', '<%= slotdate%>', '<%= docname %>', '<%= patientname %>')"><%= slot[j] %></a>
                                <% } %>
                                <% if(doctors[k].slot4[j] == false) { %>
                                    <a href="#" class="btn btn-danger disabled" style="margin-bottom: 3%;"><%= slot[j] %></a>
                                <% } %>  
                            <% } %>
                        <% } %>
                        <% if(4==slotdate) { %>
                            <% for(var j = 0; j < 10; j++) {%>
                                <% if(doctors[k].slot5[j] == true) { %>
                                    <a href="#" class="btn btn-outline-success" style="margin-bottom: 3%;" onclick="fun('<%= j %>', '<%= slotdate%>', '<%= docname %>', '<%= patientname %>')"><%= slot[j] %></a>
                                <% } %>
                                <% if(doctors[k].slot5[j] == false) { %>
                                    <a href="#" class="btn btn-danger disabled" style="margin-bottom: 3%;"><%= slot[j] %></a>
                                <% } %>  
                            <% } %>
                        <% } %>
                        <% if(5==slotdate) { %>
                            <% for(var j = 0; j < 10; j++) {%>
                                <% if(doctors[k].slot6[j] == true) { %>
                                    <a href="#" class="btn btn-outline-success" style="margin-bottom: 3%;" onclick="fun('<%= j %>', '<%= slotdate%>', '<%= docname %>', '<%= patientname %>')"><%= slot[j] %></a>
                                <% } %>
                                <% if(doctors[k].slot6[j] == false) { %>
                                    <a href="#" class="btn btn-danger disabled" style="margin-bottom: 3%;"><%= slot[j] %></a>
                                <% } %>  
                            <% } %>
                        <% } %>
                        <% if(6==slotdate) { %>
                            <% for(var j = 0; j < 10; j++) {%>
                                <% if(doctors[k].slot7[j] == true) { %>
                                    <a href="#" class="btn btn-outline-success" style="margin-bottom: 3%;" onclick="fun('<%= j %>', '<%= slotdate%>', '<%= docname %>', '<%= patientname %>')"><%= slot[j] %></a>
                                <% } %>
                                <% if(doctors[k].slot7[j] == false) { %>
                                    <a href="#" class="btn btn-danger disabled" style="margin-bottom: 3%;"><%= slot[j] %></a>
                                <% } %>  
                            <% } %>
                        <% } %>
                        <form action="/adminDashboard/confirmslotbooking" method="POST">
                            <input type="text" class="d-none" id="time" name="time">
                            <input type="text" class="d-none" id="slotdate" name="slotdate">
                            <input type="text" class="d-none" id="docname" name="docname">
                            <input type="text" class="d-none" id="patientname" name="patientname">
                            <button class="btn btn-success" type="submit">Confirm booking</button> 
                        </form>
                </div>
            </div>
    </div>
    <footer class="footer">
        <div class="offset-3 offset-md-5">
            <p>Â© Copyright 2022 Health Vault</p>
        </div>
    </footer>
    <script>
        function fun(j, slotdate, docname, patientname) {
            document.getElementById("time").value=j;
            document.getElementById("slotdate").value=slotdate;
            document.getElementById("docname").value=docname;
            document.getElementById("patientname").value=patientname;
        }
    </script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</body>
</html>